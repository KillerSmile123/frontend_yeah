<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>S.U.N.O.G</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        /* Top Bar */
        .top-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: #800000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            z-index: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-text {
            font-size: 20px;
            font-weight: bold;
            color: rgba(255,255,255,0.9);
        }

        .logo-icon {
            width: 100px;
            height: 90px;
        }

        /* Burger Menu */
        .burger {
            position: absolute;
            width: 25px;
            height: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            right: 15px;
        }

        .burger div {
            height: 3px;
            background-color: white;
            border-radius: 2px;
        }

        /* Dropdown */
        .dropdown {
            position: absolute;
            top: 60px;
            right: 15px;
            background-color: #800000;
            border-radius: 8px;
            display: none;
            flex-direction: column;
            width: 150px;
            overflow: hidden;
            z-index: 700;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .dropdown a {
            padding: 12px;
            font-size: 14px;
            color: white;
            text-decoration: none;
        }

        .dropdown a:hover {
            background-color: #a30000;
        }

        /* Floating Fire Report Button */
        .fire-report-btn {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            background: linear-gradient(to right, #800000);
            color: white;
            font-size: 18px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            text-align: center;
            z-index: 600;
            text-decoration: none;
            box-shadow: 0 5px 12px rgba(255,0,0,0.4);
        }

        @media (max-width: 600px) {
            .fire-report-btn {
                font-size: 16px;
                padding: 12px 20px;
            }
        }

        #map {
        width: 100%;
        height: calc(100% - 60px); /* 60px is the header height */
        margin-top: 60px;          /* pushes map below header */
         }



        /* Notifications */
        .notification {
            position: absolute;
            right: 20px;
            top: 80px;
            background: rgba(255,255,255,0.95);
            padding: 12px 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            width: 250px;
            font-size: 14px;
            animation: slideIn 0.5s ease-out;
            z-index: 600;
        }

        .notification h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        @keyframes slideIn {
            from {opacity: 0; transform: translateX(100px);}
            to {opacity: 1; transform: translateX(0);}
        }

        .notification-container {
            position: absolute;
            top: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 600;
        }

    </style>
</head>

    

<body>

    <!-- Map -->
    <div id="map"></div>

    <!-- Top Bar -->
    <div class="top-bar">
        
        <div class="logo-section">
            <img src="../static/images/FireTackrlogo.png" class="logo-icon" alt="Fire Logo">
            <div class="logo-text">FireTrackr</div>
        </div>

        <!-- Burger -->
        <div class="burger" id="burger">
            <div></div>
            <div></div>
            <div></div>
        </div>

        <!-- Dropdown -->
        <div class="dropdown" id="dropdown">
            <a href="../templates/userProf.html">üë§ My Profile</a>
            <a href="../templates/Setting.html">‚öôÔ∏è Settings</a>
            <a href="login.html">üö™ Logout</a>
        </div>

    </div>

    <!-- Floating Fire Report Button -->
    <a href="alert.html" class="fire-report-btn"> Report üî•</a>

    <!-- Notification Container -->
    <div class="notification-container" id="notification-container"></div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <script>
        // -------------------------------
        // 1. Map Initialization at Oroquieta City
        // -------------------------------
        const oroquietaCoords = [8.5920, 123.8420];

        var map = L.map('map', { zoomControl: false }).setView(oroquietaCoords, 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '¬© OpenStreetMap'
        }).addTo(map);

        // -------------------------------
        // 2. User Marker
        // -------------------------------
        var userMarker = L.marker(oroquietaCoords)
            .addTo(map)
            .bindTooltip("You are here", { permanent: true, direction: "top" })
            .openTooltip();

        // Update marker if geolocation is available
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                function(pos) {
                    const lat = pos.coords.latitude;
                    const lng = pos.coords.longitude;

                    userMarker.setLatLng([lat, lng]);
                    map.setView([lat, lng], 15); // zoom closer to user
                },
                function(err) {
                    console.warn("Geolocation not available or denied:", err);
                },
                { enableHighAccuracy: true }
            );
        }

        // -------------------------------
        // 3. Dropdown Toggle (Burger Menu)
        // -------------------------------
        const burger = document.getElementById('burger');
        const dropdown = document.getElementById('dropdown');

        burger.addEventListener('click', () => {
            dropdown.style.display = dropdown.style.display === 'flex' ? 'none' : 'flex';
        });

        // Close dropdown when clicking outside
        window.addEventListener('click', (e) => {
            if (!burger.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        // -------------------------------
        // 4. Example Notifications
        // -------------------------------
        const notifications = [
            { title: "Fire Alert", message: "A fire was reported near Oroquieta City." },
            { title: "Safety Tip", message: "Always keep a fire extinguisher at home." }
        ];

        const container = document.getElementById('notification-container');

        notifications.forEach((note, index) => {
            const div = document.createElement('div');
            div.className = 'notification';
            div.innerHTML = `<h4>${note.title}</h4><p>${note.message}</p>`;
            container.appendChild(div);

            // Auto-remove after delay
            setTimeout(() => div.remove(), 5000 + index * 1000);
        });
    </script>



</body>
</html>
